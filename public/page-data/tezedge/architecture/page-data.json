{"componentChunkName":"component---src-templates-post-template-js","path":"/tezedge/architecture","result":{"data":{"markdownRemark":{"fields":{"slug":"/tezedge/architecture"},"id":"02b78b23-0638-5711-8a4f-2521d67792c9","html":"<h1 id=\"architecture\" style=\"position:relative;\"><a href=\"#architecture\" aria-label=\"architecture permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Architecture</h1>\n<p>This section of the document describes the values of the TezEdge node's architecture.</p>\n<p><strong>Security and reliability</strong></p>\n<p>The TezEdge node must constitute a security and reliable system as it provides an essential service to the global community of Tezos stakeholders.</p>\n<p>Since there are significant finances at stake, security is paramount to our interests. We primarily seek to minimize the node’s vulnerability, specifically, to prevent malicious parties from exploiting errors to hack the system, e.g. validate false transactions.</p>\n<p>As the TezEdge node provides an essential service for Tezos stakeholders, our secondary objective is to maintain the service and continue providing it even if the node runs into problems. However, the provision of service should never be prioritized over the node’s security.</p>\n<p><strong>Dealing with errors</strong></p>\n<p>Increasing the complexity of software will always increase the likelihood of an error occurring. This holds true not just for coding, but also in a general sense—complex systems have a great number of moving parts, many of which also need communicate with one another. A fault in any part, or in the connection between them, may cause an error. If such an error is not contained, it may spread and lead to a system-wide failure.</p>\n<p>Diligent coding and regular revisions can only get you so far. Even the best software will eventually run into an error. However, the question isn’t whether we can <em>always</em> prevent an error—the innate randomness of the external world makes this impossible. Rather, the question is: what can we do to contain the problem and minimize its effects on the service that is provided? </p>\n<p><strong>Fault tolerance</strong></p>\n<p>A fault-tolerant system behaves in a reasonable manner in the presence of errors. The advantage of a fault-tolerant system is that the service will continue to be provided even when it runs into a problem. </p>\n<p>Fault-tolerance is achieved by establishing a hierarchy of tasks:</p>\n<ul>\n<li>Upper level tasks maintain the system, without them, the application will not run. </li>\n<li>Lower level tasks are done to improve performance, which means that even if they are not performed, the system will continue working, although service may be limited.</li>\n</ul>\n<p><strong>Undefined behavior</strong></p>\n<p>Unlike C and C++, Rust does not allow a program to be run if its code will cause unpredictable actions, also known as undefined behavior. The Rust compiler detects code that causes undefined behavior and prevents the program from being launched. </p>\n<p>The only exception to this prevention of undefined behavior happens the code is tagged <code class=\"language-text\">unsafe</code>. Since the Rust-based TezEdge node communicates with the native OCaml Tezos node, there are areas where we had to use unsafe code to implement FFI calls between Rust and OCaml. To avoid possible memory related errors we are passing all data into FFI functions by value, not by reference. That way, we don’t have to deal with cross FFI lifetimes.</p>\n<p><strong>Unwinding</strong></p>\n<p>The process by which Rust handles errors is known as unwinding. In case a Rust program runs into an error, it has a tiered set of solutions:</p>\n<p><strong>1. Option</strong> is used in case there is a reasonable absence of a value or information.</p>\n<p><strong>2. Result</strong> is used if something goes wrong, but can be reasonably handled.</p>\n<p><strong>3. Panic</strong> is used if the the problem cannot be reasonably handled.</p>\n<p><strong>4. Abort</strong> is used if something catastrophic happens and the program must terminate immediately.</p>\n<p>This set of solutions is aimed at preventing, handling and containing errors. When errors do happen, Rust will first figure out how serious they are and then apply a solution. This helps maintain the service even in the presence of some errors, but will ultimately abort the program if there is a catastrophic fault. </p>\n<p>If an error is detected when trying to achieve a goal, we make an attempt to correct the error. If we cannot correct the error we immediately abort the current task and start performing a simpler task.</p>\n<p><strong>Error isolation</strong></p>\n<p>Software is almost always written by a team (or teams) of developers. Different developers write different modules, but an error in one module must not affect other modules. </p>\n<p>We need to create a layer of separation between modules to prevent the spread of errors. For this, we use the concept of an <em>actor model</em>. </p>\n<p><strong>The actor model</strong></p>\n<p>The actor model is a conceptual model for software systems. Think of it as a general rulebook for how the system’s components should interact with each other. </p>\n<p>Actors provide protection domains, so that an error in one actor cannot affect the operation of other actors. Different developers write different applications which are run in separate actors; errors in one application should not have a negative influence on the other applications running in the system.</p>\n<p>At an abstract level, the actor model solves the issue of communication within code, similarly to how a company’s employees share information between each other.</p>\n<p><strong>Actors</strong></p>\n<p>An actor is a primitive unit of computation that is capable of performing tasks, but is completely separated from other actors. In the actor model, an actor is analogous to what an object is in object-oriented programming. The key difference is that actors are completely separated and they never share memory.</p>\n<p>Actors have addresses to which other actors send messages. By sending a message, an actor delegates a task onto a different actor. While multiple actors can perform tasks concurrently, a single actor handles multiple tasks sequentially, meaning that if you send three messages with tasks to a single actor, it will only be able to perform one task at a time. If you want these tasks performed concurrently, you must have three actors, each of whom will receive one message and perform one task.</p>\n<p>When an actor receives a message, it can do the following actions:</p>\n<ul>\n<li>Create additional actors</li>\n<li>Send messages to other actors</li>\n<li>Determine what to do with the next message</li>\n</ul>\n<h1 id=\"the-shell-and-its-actors\" style=\"position:relative;\"><a href=\"#the-shell-and-its-actors\" aria-label=\"the shell and its actors permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The shell and its actors</h1>\n<p>This section of the document describes the high level architecture of the TezEdge node.</p>\n<p>The TezEdge shell consists of several actors working together:</p>\n<p><strong>Peer Manager</strong></p>\n<p>The network level is responsible for peer to peer (P2P) network communication with remote peers.</p>\n<p>At the top level sits the Peer Manager, which is responsible for establishing network connection to remote peers.</p>\n<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1586698628416\" width=\"323.640625\" xmlns=\"http://www.w3.org/2000/svg\" height=\"142\" viewBox=\"0 0 323.640625 142\"><style>#mermaid-1586698628416 .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1586698628416 .label text{fill:#333}#mermaid-1586698628416 .node rect,#mermaid-1586698628416 .node circle,#mermaid-1586698628416 .node ellipse,#mermaid-1586698628416 .node polygon,#mermaid-1586698628416 .node path{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1586698628416 .node .label{text-align:center}#mermaid-1586698628416 .node.clickable{cursor:pointer}#mermaid-1586698628416 .arrowheadPath{fill:#333}#mermaid-1586698628416 .edgePath .path{stroke:#666;stroke-width:1.5px}#mermaid-1586698628416 .edgeLabel{background-color:#fff;text-align:center}#mermaid-1586698628416 .cluster rect{fill:#eaf2fb;stroke:#26a;stroke-width:1px}#mermaid-1586698628416 .cluster text{fill:#333}#mermaid-1586698628416 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#eaf2fb;border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1586698628416 .actor{stroke:#999;fill:#eee}#mermaid-1586698628416 text.actor{fill:#333;stroke:none}#mermaid-1586698628416 .actor-line{stroke:#666}#mermaid-1586698628416 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1586698628416 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1586698628416 #arrowhead{fill:#333}#mermaid-1586698628416 .sequenceNumber{fill:#fff}#mermaid-1586698628416 #sequencenumber{fill:#333}#mermaid-1586698628416 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1586698628416 .messageText{fill:#333;stroke:none}#mermaid-1586698628416 .labelBox{stroke:#999;fill:#eee}#mermaid-1586698628416 .labelText{fill:#333;stroke:none}#mermaid-1586698628416 .loopText{fill:#333;stroke:none}#mermaid-1586698628416 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#999}#mermaid-1586698628416 .note{stroke:#770;fill:#ffa}#mermaid-1586698628416 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1586698628416 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1586698628416 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1586698628416 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1586698628416 .mermaid-main-font{font-family:\"trebuchet ms\", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628416 .section{stroke:none;opacity:0.2}#mermaid-1586698628416 .section0{fill:#80b3e6}#mermaid-1586698628416 .section2{fill:#80b3e6}#mermaid-1586698628416 .section1,#mermaid-1586698628416 .section3{fill:#fff;opacity:0.2}#mermaid-1586698628416 .sectionTitle0{fill:#333}#mermaid-1586698628416 .sectionTitle1{fill:#333}#mermaid-1586698628416 .sectionTitle2{fill:#333}#mermaid-1586698628416 .sectionTitle3{fill:#333}#mermaid-1586698628416 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628416 .grid .tick{stroke:#e6e6e6;opacity:0.8;shape-rendering:crispEdges}#mermaid-1586698628416 .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628416 .grid path{stroke-width:0}#mermaid-1586698628416 .today{fill:none;stroke:#d42;stroke-width:2px}#mermaid-1586698628416 .task{stroke-width:2}#mermaid-1586698628416 .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628416 .taskText:not([font-size]){font-size:11px}#mermaid-1586698628416 .taskTextOutsideRight{fill:#333;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628416 .taskTextOutsideLeft{fill:#333;text-anchor:end;font-size:11px}#mermaid-1586698628416 .task.clickable{cursor:pointer}#mermaid-1586698628416 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1586698628416 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1586698628416 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1586698628416 .taskText0,#mermaid-1586698628416 .taskText1,#mermaid-1586698628416 .taskText2,#mermaid-1586698628416 .taskText3{fill:#fff}#mermaid-1586698628416 .task0,#mermaid-1586698628416 .task1,#mermaid-1586698628416 .task2,#mermaid-1586698628416 .task3{fill:#26a;stroke:#1a4d80}#mermaid-1586698628416 .taskTextOutside0,#mermaid-1586698628416 .taskTextOutside2{fill:#333}#mermaid-1586698628416 .taskTextOutside1,#mermaid-1586698628416 .taskTextOutside3{fill:#333}#mermaid-1586698628416 .active0,#mermaid-1586698628416 .active1,#mermaid-1586698628416 .active2,#mermaid-1586698628416 .active3{fill:#eee;stroke:#1a4d80}#mermaid-1586698628416 .activeText0,#mermaid-1586698628416 .activeText1,#mermaid-1586698628416 .activeText2,#mermaid-1586698628416 .activeText3{fill:#333 !important}#mermaid-1586698628416 .done0,#mermaid-1586698628416 .done1,#mermaid-1586698628416 .done2,#mermaid-1586698628416 .done3{stroke:#666;fill:#bbb;stroke-width:2}#mermaid-1586698628416 .doneText0,#mermaid-1586698628416 .doneText1,#mermaid-1586698628416 .doneText2,#mermaid-1586698628416 .doneText3{fill:#333 !important}#mermaid-1586698628416 .crit0,#mermaid-1586698628416 .crit1,#mermaid-1586698628416 .crit2,#mermaid-1586698628416 .crit3{stroke:#b1361b;fill:#d42;stroke-width:2}#mermaid-1586698628416 .activeCrit0,#mermaid-1586698628416 .activeCrit1,#mermaid-1586698628416 .activeCrit2,#mermaid-1586698628416 .activeCrit3{stroke:#b1361b;fill:#eee;stroke-width:2}#mermaid-1586698628416 .doneCrit0,#mermaid-1586698628416 .doneCrit1,#mermaid-1586698628416 .doneCrit2,#mermaid-1586698628416 .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1586698628416 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1586698628416 .milestoneText{font-style:italic}#mermaid-1586698628416 .doneCritText0,#mermaid-1586698628416 .doneCritText1,#mermaid-1586698628416 .doneCritText2,#mermaid-1586698628416 .doneCritText3{fill:#333 !important}#mermaid-1586698628416 .activeCritText0,#mermaid-1586698628416 .activeCritText1,#mermaid-1586698628416 .activeCritText2,#mermaid-1586698628416 .activeCritText3{fill:#333 !important}#mermaid-1586698628416 .titleText{text-anchor:middle;font-size:18px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628416 g.classGroup text{fill:#999;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1586698628416 g.classGroup text .title{font-weight:bolder}#mermaid-1586698628416 g.clickable{cursor:pointer}#mermaid-1586698628416 g.classGroup rect{fill:#eee;stroke:#999}#mermaid-1586698628416 g.classGroup line{stroke:#999;stroke-width:1}#mermaid-1586698628416 .classLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1586698628416 .classLabel .label{fill:#999;font-size:10px}#mermaid-1586698628416 .relation{stroke:#999;stroke-width:1;fill:none}#mermaid-1586698628416 .dashed-line{stroke-dasharray:3}#mermaid-1586698628416 #compositionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1586698628416 #compositionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1586698628416 #aggregationStart{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1586698628416 #aggregationEnd{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1586698628416 #dependencyStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1586698628416 #dependencyEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1586698628416 #extensionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1586698628416 #extensionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1586698628416 .commit-id,#mermaid-1586698628416 .commit-msg,#mermaid-1586698628416 .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628416 .pieTitleText{text-anchor:middle;font-size:25px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628416 .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628416 g.stateGroup text{fill:#999;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628416 g.stateGroup text{fill:#999;stroke:none;font-size:10px}#mermaid-1586698628416 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1586698628416 g.stateGroup rect{fill:#eee;stroke:#999}#mermaid-1586698628416 g.stateGroup line{stroke:#999;stroke-width:1}#mermaid-1586698628416 .transition{stroke:#999;stroke-width:1;fill:none}#mermaid-1586698628416 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1586698628416 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1586698628416 .state-note{stroke:#770;fill:#ffa}#mermaid-1586698628416 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1586698628416 .stateLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1586698628416 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: '\"trebuchet ms\", verdana, arial';--mermaid-font-family: \"Comic Sans MS\", \"Comic Sans\", cursive}\n\n:root { --mermaid-font-family: \"trebuchet ms\", verdana, arial;}</style><style>#mermaid-1586698628416 {\n    color: rgb(0, 0, 0);\n    font: normal normal 400 normal 16px / normal \"trebuchet ms\", verdana, arial;\n  }</style><g transform=\"translate(0, 0)\"><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M110.0301846590909,46L42.4609375,71L42.4609375,96\" marker-end=\"url(#arrowhead9)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead9\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M161.3828125,46L161.3828125,71L161.3828125,96\" marker-end=\"url(#arrowhead10)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead10\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath\" style=\"opacity: 1;\"><path class=\"path\" d=\"M212.92436079545456,46L280.7421875,71L280.7421875,96\" marker-end=\"url(#arrowhead11)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead11\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node\" id=\"A\" transform=\"translate(161.3828125,27)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-60.6953125\" y=\"-19\" width=\"121.390625\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-50.6953125,-9)\"><foreignObject width=\"101.390625\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Peer Manager</div></foreignObject></g></g></g><g class=\"node\" id=\"B\" transform=\"translate(42.4609375,115)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-34.4609375\" y=\"-19\" width=\"68.921875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-24.4609375,-9)\"><foreignObject width=\"48.921875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Peer A</div></foreignObject></g></g></g><g class=\"node\" id=\"C\" transform=\"translate(161.3828125,115)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-34.4609375\" y=\"-19\" width=\"68.921875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-24.4609375,-9)\"><foreignObject width=\"48.921875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Peer B</div></foreignObject></g></g></g><g class=\"node\" id=\"D\" transform=\"translate(280.7421875,115)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-34.8984375\" y=\"-19\" width=\"69.796875\" height=\"38\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-24.8984375,-9)\"><foreignObject width=\"49.796875\" height=\"18\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Peer C</div></foreignObject></g></g></g></g></g></g></svg></div>\n<p>The peer manager also accepts incoming connection from remote peers.</p>\n<p>When the peer is started, it will first try to start bootstrapping procedure. If the bootstrap is successful then it will\nstart to accept messages from the connected remote peer. The same peer is also used to transmit messages to the remote peer.</p>\n<p>Messages from peer manager are cryptographically validated and then sent up to the shell.</p>\n<p><strong>P2P layer</strong></p>\n<p>This layer is used for communication between two nodes on the network. The communication begins with both nodes sending a bootstrapping message to the other, therefore exchanging information such as their keys, cryptographic nonces and the version of the P2P protocol.</p>\n<p>This part of communication is still unencrypted. Encryption of messages starts from the moment both nodes have received and accepted the bootstrap messages.</p>\n<p>In case one node does not accept the bootstrap node sent to it by the other node, it will send a 'Nack' message and the communication will end.</p>\n<p>Once communication is encrypted, the nodes begin sending messages containing blocks and their operations. The chain is synchronized via these messages. A node that does not have a fully synced chain requests information from other nodes in the network, but it can also provide blocks and operations it already has to the other nodes in the network.</p>\n<p><strong>Chain Manager</strong></p>\n<p>The chain manager is responsible for chain synchronization.</p>\n<p>This actor is monitoring whether every block (except genesis) has its predecessor. If not, it will try to get it from one of the connected peers.</p>\n<p><strong>Chain Feeder</strong></p>\n<p>The chain feeder periodically runs checks to see if it's possible to apply next block to the protocol.</p>\n<p>We are using the word <em>feed</em> here because this actor is not <em>applying</em> the block directly, but instead it is sending the block via IPC to the protocol runner, another type of process. We will describe the protocol runner later on in this article.</p>\n<p><strong>Context Listener</strong></p>\n<p>The context listener listens to the context events that are generated when a block is applied to the protocol. These events are transferred from the protocol runner to the context listener via the IPC.</p>\n<p><strong>The following graph depicts how blocks are applied.</strong></p>\n<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1586698628437\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" height=\"100%\" style=\"max-width:685px;\" viewBox=\"-85 -10 685 366\"><style>#mermaid-1586698628437 .label{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1586698628437 .label text{fill:#333}#mermaid-1586698628437 .node rect,#mermaid-1586698628437 .node circle,#mermaid-1586698628437 .node ellipse,#mermaid-1586698628437 .node polygon,#mermaid-1586698628437 .node path{fill:#eee;stroke:#999;stroke-width:1px}#mermaid-1586698628437 .node .label{text-align:center}#mermaid-1586698628437 .node.clickable{cursor:pointer}#mermaid-1586698628437 .arrowheadPath{fill:#333}#mermaid-1586698628437 .edgePath .path{stroke:#666;stroke-width:1.5px}#mermaid-1586698628437 .edgeLabel{background-color:#fff;text-align:center}#mermaid-1586698628437 .cluster rect{fill:#eaf2fb;stroke:#26a;stroke-width:1px}#mermaid-1586698628437 .cluster text{fill:#333}#mermaid-1586698628437 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#eaf2fb;border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1586698628437 .actor{stroke:#999;fill:#eee}#mermaid-1586698628437 text.actor{fill:#333;stroke:none}#mermaid-1586698628437 .actor-line{stroke:#666}#mermaid-1586698628437 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1586698628437 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1586698628437 #arrowhead{fill:#333}#mermaid-1586698628437 .sequenceNumber{fill:#fff}#mermaid-1586698628437 #sequencenumber{fill:#333}#mermaid-1586698628437 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1586698628437 .messageText{fill:#333;stroke:none}#mermaid-1586698628437 .labelBox{stroke:#999;fill:#eee}#mermaid-1586698628437 .labelText{fill:#333;stroke:none}#mermaid-1586698628437 .loopText{fill:#333;stroke:none}#mermaid-1586698628437 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#999}#mermaid-1586698628437 .note{stroke:#770;fill:#ffa}#mermaid-1586698628437 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1586698628437 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1586698628437 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1586698628437 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1586698628437 .mermaid-main-font{font-family:\"trebuchet ms\", verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628437 .section{stroke:none;opacity:0.2}#mermaid-1586698628437 .section0{fill:#80b3e6}#mermaid-1586698628437 .section2{fill:#80b3e6}#mermaid-1586698628437 .section1,#mermaid-1586698628437 .section3{fill:#fff;opacity:0.2}#mermaid-1586698628437 .sectionTitle0{fill:#333}#mermaid-1586698628437 .sectionTitle1{fill:#333}#mermaid-1586698628437 .sectionTitle2{fill:#333}#mermaid-1586698628437 .sectionTitle3{fill:#333}#mermaid-1586698628437 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628437 .grid .tick{stroke:#e6e6e6;opacity:0.8;shape-rendering:crispEdges}#mermaid-1586698628437 .grid .tick text{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628437 .grid path{stroke-width:0}#mermaid-1586698628437 .today{fill:none;stroke:#d42;stroke-width:2px}#mermaid-1586698628437 .task{stroke-width:2}#mermaid-1586698628437 .taskText{text-anchor:middle;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628437 .taskText:not([font-size]){font-size:11px}#mermaid-1586698628437 .taskTextOutsideRight{fill:#333;text-anchor:start;font-size:11px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628437 .taskTextOutsideLeft{fill:#333;text-anchor:end;font-size:11px}#mermaid-1586698628437 .task.clickable{cursor:pointer}#mermaid-1586698628437 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1586698628437 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1586698628437 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1586698628437 .taskText0,#mermaid-1586698628437 .taskText1,#mermaid-1586698628437 .taskText2,#mermaid-1586698628437 .taskText3{fill:#fff}#mermaid-1586698628437 .task0,#mermaid-1586698628437 .task1,#mermaid-1586698628437 .task2,#mermaid-1586698628437 .task3{fill:#26a;stroke:#1a4d80}#mermaid-1586698628437 .taskTextOutside0,#mermaid-1586698628437 .taskTextOutside2{fill:#333}#mermaid-1586698628437 .taskTextOutside1,#mermaid-1586698628437 .taskTextOutside3{fill:#333}#mermaid-1586698628437 .active0,#mermaid-1586698628437 .active1,#mermaid-1586698628437 .active2,#mermaid-1586698628437 .active3{fill:#eee;stroke:#1a4d80}#mermaid-1586698628437 .activeText0,#mermaid-1586698628437 .activeText1,#mermaid-1586698628437 .activeText2,#mermaid-1586698628437 .activeText3{fill:#333 !important}#mermaid-1586698628437 .done0,#mermaid-1586698628437 .done1,#mermaid-1586698628437 .done2,#mermaid-1586698628437 .done3{stroke:#666;fill:#bbb;stroke-width:2}#mermaid-1586698628437 .doneText0,#mermaid-1586698628437 .doneText1,#mermaid-1586698628437 .doneText2,#mermaid-1586698628437 .doneText3{fill:#333 !important}#mermaid-1586698628437 .crit0,#mermaid-1586698628437 .crit1,#mermaid-1586698628437 .crit2,#mermaid-1586698628437 .crit3{stroke:#b1361b;fill:#d42;stroke-width:2}#mermaid-1586698628437 .activeCrit0,#mermaid-1586698628437 .activeCrit1,#mermaid-1586698628437 .activeCrit2,#mermaid-1586698628437 .activeCrit3{stroke:#b1361b;fill:#eee;stroke-width:2}#mermaid-1586698628437 .doneCrit0,#mermaid-1586698628437 .doneCrit1,#mermaid-1586698628437 .doneCrit2,#mermaid-1586698628437 .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1586698628437 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1586698628437 .milestoneText{font-style:italic}#mermaid-1586698628437 .doneCritText0,#mermaid-1586698628437 .doneCritText1,#mermaid-1586698628437 .doneCritText2,#mermaid-1586698628437 .doneCritText3{fill:#333 !important}#mermaid-1586698628437 .activeCritText0,#mermaid-1586698628437 .activeCritText1,#mermaid-1586698628437 .activeCritText2,#mermaid-1586698628437 .activeCritText3{fill:#333 !important}#mermaid-1586698628437 .titleText{text-anchor:middle;font-size:18px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628437 g.classGroup text{fill:#999;stroke:none;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1586698628437 g.classGroup text .title{font-weight:bolder}#mermaid-1586698628437 g.clickable{cursor:pointer}#mermaid-1586698628437 g.classGroup rect{fill:#eee;stroke:#999}#mermaid-1586698628437 g.classGroup line{stroke:#999;stroke-width:1}#mermaid-1586698628437 .classLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1586698628437 .classLabel .label{fill:#999;font-size:10px}#mermaid-1586698628437 .relation{stroke:#999;stroke-width:1;fill:none}#mermaid-1586698628437 .dashed-line{stroke-dasharray:3}#mermaid-1586698628437 #compositionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1586698628437 #compositionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1586698628437 #aggregationStart{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1586698628437 #aggregationEnd{fill:#eee;stroke:#999;stroke-width:1}#mermaid-1586698628437 #dependencyStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1586698628437 #dependencyEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1586698628437 #extensionStart{fill:#999;stroke:#999;stroke-width:1}#mermaid-1586698628437 #extensionEnd{fill:#999;stroke:#999;stroke-width:1}#mermaid-1586698628437 .commit-id,#mermaid-1586698628437 .commit-msg,#mermaid-1586698628437 .branch-label{fill:lightgrey;color:lightgrey;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628437 .pieTitleText{text-anchor:middle;font-size:25px;fill:#333;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628437 .slice{font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628437 g.stateGroup text{fill:#999;stroke:none;font-size:10px;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1586698628437 g.stateGroup text{fill:#999;stroke:none;font-size:10px}#mermaid-1586698628437 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1586698628437 g.stateGroup rect{fill:#eee;stroke:#999}#mermaid-1586698628437 g.stateGroup line{stroke:#999;stroke-width:1}#mermaid-1586698628437 .transition{stroke:#999;stroke-width:1;fill:none}#mermaid-1586698628437 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1586698628437 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1586698628437 .state-note{stroke:#770;fill:#ffa}#mermaid-1586698628437 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1586698628437 .stateLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5}#mermaid-1586698628437 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:'trebuchet ms', verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: '\"trebuchet ms\", verdana, arial';--mermaid-font-family: \"Comic Sans MS\", \"Comic Sans\", cursive}\n\n:root { --mermaid-font-family: \"trebuchet ms\", verdana, arial;}</style><style>#mermaid-1586698628437 {\n    color: rgb(0, 0, 0);\n    font: normal normal 400 normal 16px / normal \"trebuchet ms\", verdana, arial;\n  }</style><g></g><g><line id=\"actor0\" x1=\"75\" y1=\"5\" x2=\"75\" y2=\"355\" class=\"actor-line\" stroke-width=\"0.5px\" stroke=\"#999\"></line><rect x=\"0\" y=\"0\" fill=\"#eaeaea\" stroke=\"#666\" width=\"150\" height=\"65\" rx=\"3\" ry=\"3\" class=\"actor\"></rect><text x=\"75\" y=\"32.5\" dominant-baseline=\"central\" alignment-baseline=\"central\" class=\"actor\" style=\"text-anchor: middle; font-size: 14px;\"><tspan x=\"75\" dy=\"0\">Chain manager</tspan></text></g><g><line id=\"actor1\" x1=\"275\" y1=\"5\" x2=\"275\" y2=\"355\" class=\"actor-line\" stroke-width=\"0.5px\" stroke=\"#999\"></line><rect x=\"200\" y=\"0\" fill=\"#eaeaea\" stroke=\"#666\" width=\"150\" height=\"65\" rx=\"3\" ry=\"3\" class=\"actor\"></rect><text x=\"275\" y=\"32.5\" dominant-baseline=\"central\" alignment-baseline=\"central\" class=\"actor\" style=\"text-anchor: middle; font-size: 14px;\"><tspan x=\"275\" dy=\"0\">Protocol runner</tspan></text></g><g><line id=\"actor2\" x1=\"475\" y1=\"5\" x2=\"475\" y2=\"355\" class=\"actor-line\" stroke-width=\"0.5px\" stroke=\"#999\"></line><rect x=\"400\" y=\"0\" fill=\"#eaeaea\" stroke=\"#666\" width=\"150\" height=\"65\" rx=\"3\" ry=\"3\" class=\"actor\"></rect><text x=\"475\" y=\"32.5\" dominant-baseline=\"central\" alignment-baseline=\"central\" class=\"actor\" style=\"text-anchor: middle; font-size: 14px;\"><tspan x=\"475\" dy=\"0\">Context listener</tspan></text></g><defs><marker id=\"arrowhead\" refX=\"5\" refY=\"2\" markerWidth=\"6\" markerHeight=\"4\" orient=\"auto\"><path d=\"M 0,0 V 4 L6,2 Z\"></path></marker></defs><defs><marker id=\"crosshead\" markerWidth=\"15\" markerHeight=\"8\" orient=\"auto\" refX=\"16\" refY=\"4\"><path fill=\"black\" stroke=\"#000000\" stroke-width=\"1px\" d=\"M 9,2 V 6 L16,4 Z\" style=\"stroke-dasharray: 0, 0;\"></path><path fill=\"none\" stroke=\"#000000\" stroke-width=\"1px\" d=\"M 0,1 L 6,7 M 6,1 L 0,7\" style=\"stroke-dasharray: 0, 0;\"></path></marker></defs><defs><marker id=\"sequencenumber\" refX=\"15\" refY=\"15\" markerWidth=\"60\" markerHeight=\"40\" orient=\"auto\"><circle cx=\"15\" cy=\"15\" r=\"6\"></circle></marker></defs><g><text x=\"75\" y=\"118\" class=\"messageText\" style=\"text-anchor: middle;\">Look for blocks to apply</text><path d=\"M 75,125 C 135,115 135,155 75,145\" class=\"messageLine0\" stroke-width=\"2\" stroke=\"black\" marker-end=\"url(#arrowhead)\" style=\"fill: none;\"></path></g><g><line x1=\"-35\" y1=\"75\" x2=\"185\" y2=\"75\" class=\"loopLine\"></line><line x1=\"185\" y1=\"75\" x2=\"185\" y2=\"165\" class=\"loopLine\"></line><line x1=\"-35\" y1=\"165\" x2=\"185\" y2=\"165\" class=\"loopLine\"></line><line x1=\"-35\" y1=\"75\" x2=\"-35\" y2=\"165\" class=\"loopLine\"></line><polygon points=\"-35,75 15,75 15,88 6.6,95 -35,95\" class=\"labelBox\"></polygon><text x=\"-27.5\" y=\"90\" class=\"labelText\"><tspan x=\"-27.5\">loop</tspan></text><text x=\"75\" y=\"90\" class=\"loopText\" style=\"text-anchor: middle;\"><tspan x=\"75\">[ Watchdog ]</tspan></text></g><g><text x=\"175\" y=\"193\" class=\"messageText\" style=\"text-anchor: middle;\">Apply block</text><line x1=\"75\" y1=\"200\" x2=\"275\" y2=\"200\" class=\"messageLine0\" stroke-width=\"2\" stroke=\"black\" marker-end=\"url(#arrowhead)\" style=\"fill: none;\"></line></g><g><rect x=\"270\" y=\"202\" fill=\"#EDF2AE\" stroke=\"#666\" width=\"10\" height=\"68\" rx=\"0\" ry=\"0\" class=\"activation0\"></rect></g><g><text x=\"172.5\" y=\"228\" class=\"messageText\" style=\"text-anchor: middle;\">Block applied</text><line x1=\"270\" y1=\"235\" x2=\"75\" y2=\"235\" class=\"messageLine0\" stroke-width=\"2\" stroke=\"black\" marker-end=\"url(#arrowhead)\" style=\"fill: none;\"></line></g><g></g><g><text x=\"377.5\" y=\"263\" class=\"messageText\" style=\"text-anchor: middle;\">Context events</text><line x1=\"280\" y1=\"270\" x2=\"475\" y2=\"270\" class=\"messageLine1\" stroke-width=\"2\" stroke=\"black\" marker-end=\"url(#arrowhead)\" style=\"stroke-dasharray: 3, 3; fill: none;\"></line></g><g><rect x=\"0\" y=\"290\" fill=\"#eaeaea\" stroke=\"#666\" width=\"150\" height=\"65\" rx=\"3\" ry=\"3\" class=\"actor\"></rect><text x=\"75\" y=\"322.5\" dominant-baseline=\"central\" alignment-baseline=\"central\" class=\"actor\" style=\"text-anchor: middle; font-size: 14px;\"><tspan x=\"75\" dy=\"0\">Chain manager</tspan></text></g><g><rect x=\"200\" y=\"290\" fill=\"#eaeaea\" stroke=\"#666\" width=\"150\" height=\"65\" rx=\"3\" ry=\"3\" class=\"actor\"></rect><text x=\"275\" y=\"322.5\" dominant-baseline=\"central\" alignment-baseline=\"central\" class=\"actor\" style=\"text-anchor: middle; font-size: 14px;\"><tspan x=\"275\" dy=\"0\">Protocol runner</tspan></text></g><g><rect x=\"400\" y=\"290\" fill=\"#eaeaea\" stroke=\"#666\" width=\"150\" height=\"65\" rx=\"3\" ry=\"3\" class=\"actor\"></rect><text x=\"475\" y=\"322.5\" dominant-baseline=\"central\" alignment-baseline=\"central\" class=\"actor\" style=\"text-anchor: middle; font-size: 14px;\"><tspan x=\"475\" dy=\"0\">Context listener</tspan></text></g></svg></div>\n<p><strong>RPC</strong></p>\n<p>The RPC is relatively simple more or less standardized. We currently have the same number of functional endpoints as the original Tezos node. </p>\n<p>The REST endpoint is a technically standardized method of calling various web operations.\nIt is exposed (for instance, <code class=\"language-text\">chains/main/blocks/{block_id}</code> where <code class=\"language-text\">{block_id}</code> is the parameter of the endpoint). </p>\n<p>The user can call the endpoint from their application or browser by adding the endpoint address. For instance, if the node is running locally and the RPC is at <code class=\"language-text\">port  18732</code>, the user can all this RPC by entering the entire address as such: <code class=\"language-text\">localhost:18732/chains/main/blocks/head</code></p>\n<p>The node first sparses the endpoint, checking whether it is valid or not. It then extracts the arguments from it (this is known as routing). This launches a mapped function within the node. We recognize two categories of endpoints:</p>\n<p><strong>1. Endpoints that read data</strong></p>\n<p>Based on the arguments, the endpoint figures out which part of the database it is supposed to read from. The data is read, then serialized into a JSON format and returned as the result of the function. </p>\n<p>For instance with <code class=\"language-text\">chains/main/blocks/head</code>, we know that the user is requesting the database for data about blocks, therefore we know where to read from and we also know that the block head is a special value for the block at the highest level.</p>\n<p><strong>2. Endpoints that interact with the system</strong></p>\n<p>Since these endpoints interact with the system itself, we expect them to influence the node.</p>\n<p>For instance, the endpoint <code class=\"language-text\">/network/peers/&lt;peer_id&gt;/ban</code> informs the node that it should disconnect from a peer and cease connecting to them. Since the node is operating on the actor model, it is necessary to use ask pattern which is a method of communicating with the external actors. In this case, the network manager (an actor in charge of peer connections) is requested to disconnect a peer with the specified id and place them on a blacklist. Note that we are currently working on implementing these endpoints. </p>","frontmatter":{"date":null,"title":"Architecture","sidebar":"Docs","showTitle":false,"hideAnchor":null}}},"pageContext":{}}}